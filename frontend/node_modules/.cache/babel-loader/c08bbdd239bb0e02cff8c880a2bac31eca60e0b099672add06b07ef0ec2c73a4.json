{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\nvar _d3Shape = require(\"@mui/x-charts-vendor/d3-shape\");\nvar _warning = require(\"@mui/x-internals/warning\");\nvar _stackSeries = require(\"../../internals/stackSeries\");\nvar _defaultizeValueFormatter = require(\"../../internals/defaultizeValueFormatter\");\n// For now it's a copy past of bar charts formatter, but maybe will diverge later\nconst seriesProcessor = (params, dataset) => {\n  const {\n    seriesOrder,\n    series\n  } = params;\n  const stackingGroups = (0, _stackSeries.getStackingGroups)((0, _extends2.default)({}, params, {\n    defaultStrategy: {\n      stackOffset: 'none'\n    }\n  }));\n\n  // Create a data set with format adapted to d3\n  const d3Dataset = dataset ?? [];\n  seriesOrder.forEach(id => {\n    const data = series[id].data;\n    if (data !== undefined) {\n      data.forEach((value, index) => {\n        if (d3Dataset.length <= index) {\n          d3Dataset.push({\n            [id]: value\n          });\n        } else {\n          d3Dataset[index][id] = value;\n        }\n      });\n    } else if (dataset === undefined && process.env.NODE_ENV !== 'production') {\n      throw new Error([`MUI X Charts: line series with id='${id}' has no data.`, 'Either provide a data property to the series or use the dataset prop.'].join('\\n'));\n    }\n  });\n  const completedSeries = {};\n  stackingGroups.forEach(stackingGroup => {\n    // Get stacked values, and derive the domain\n    const {\n      ids,\n      stackingOrder,\n      stackingOffset\n    } = stackingGroup;\n    const stackedSeries = (0, _d3Shape.stack)().keys(ids.map(id => {\n      // Use dataKey if needed and available\n      const dataKey = series[id].dataKey;\n      return series[id].data === undefined && dataKey !== undefined ? dataKey : id;\n    })).value((d, key) => d[key] ?? 0) // defaultize null value to 0\n    .order(stackingOrder).offset(stackingOffset)(d3Dataset);\n    ids.forEach((id, index) => {\n      const dataKey = series[id].dataKey;\n      completedSeries[id] = (0, _extends2.default)({\n        labelMarkType: 'line'\n      }, series[id], {\n        data: dataKey ? dataset.map(data => {\n          const value = data[dataKey];\n          if (typeof value !== 'number') {\n            if (process.env.NODE_ENV !== 'production') {\n              if (value !== null) {\n                (0, _warning.warnOnce)([`MUI X Charts: Your dataset key \"${dataKey}\" is used for plotting line, but contains nonnumerical elements.`, 'Line plots only support numbers and null values.']);\n              }\n            }\n            return null;\n          }\n          return value;\n        }) : series[id].data,\n        stackedData: stackedSeries[index].map(([a, b]) => [a, b])\n      });\n    });\n  });\n  return {\n    seriesOrder,\n    stackingGroups,\n    series: (0, _defaultizeValueFormatter.defaultizeValueFormatter)(completedSeries, v => v == null ? '' : v.toLocaleString())\n  };\n};\nvar _default = exports.default = seriesProcessor;","map":{"version":3,"names":["_interopRequireDefault","require","default","Object","defineProperty","exports","value","_extends2","_d3Shape","_warning","_stackSeries","_defaultizeValueFormatter","seriesProcessor","params","dataset","seriesOrder","series","stackingGroups","getStackingGroups","defaultStrategy","stackOffset","d3Dataset","forEach","id","data","undefined","index","length","push","process","env","NODE_ENV","Error","join","completedSeries","stackingGroup","ids","stackingOrder","stackingOffset","stackedSeries","stack","keys","map","dataKey","d","key","order","offset","labelMarkType","warnOnce","stackedData","a","b","defaultizeValueFormatter","v","toLocaleString","_default"],"sources":["C:/Users/LIJIN/Desktop/webTest/Bak/webTest/frontend/node_modules/@mui/x-charts/LineChart/seriesConfig/seriesProcessor.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\nvar _d3Shape = require(\"@mui/x-charts-vendor/d3-shape\");\nvar _warning = require(\"@mui/x-internals/warning\");\nvar _stackSeries = require(\"../../internals/stackSeries\");\nvar _defaultizeValueFormatter = require(\"../../internals/defaultizeValueFormatter\");\n// For now it's a copy past of bar charts formatter, but maybe will diverge later\nconst seriesProcessor = (params, dataset) => {\n  const {\n    seriesOrder,\n    series\n  } = params;\n  const stackingGroups = (0, _stackSeries.getStackingGroups)((0, _extends2.default)({}, params, {\n    defaultStrategy: {\n      stackOffset: 'none'\n    }\n  }));\n\n  // Create a data set with format adapted to d3\n  const d3Dataset = dataset ?? [];\n  seriesOrder.forEach(id => {\n    const data = series[id].data;\n    if (data !== undefined) {\n      data.forEach((value, index) => {\n        if (d3Dataset.length <= index) {\n          d3Dataset.push({\n            [id]: value\n          });\n        } else {\n          d3Dataset[index][id] = value;\n        }\n      });\n    } else if (dataset === undefined && process.env.NODE_ENV !== 'production') {\n      throw new Error([`MUI X Charts: line series with id='${id}' has no data.`, 'Either provide a data property to the series or use the dataset prop.'].join('\\n'));\n    }\n  });\n  const completedSeries = {};\n  stackingGroups.forEach(stackingGroup => {\n    // Get stacked values, and derive the domain\n    const {\n      ids,\n      stackingOrder,\n      stackingOffset\n    } = stackingGroup;\n    const stackedSeries = (0, _d3Shape.stack)().keys(ids.map(id => {\n      // Use dataKey if needed and available\n      const dataKey = series[id].dataKey;\n      return series[id].data === undefined && dataKey !== undefined ? dataKey : id;\n    })).value((d, key) => d[key] ?? 0) // defaultize null value to 0\n    .order(stackingOrder).offset(stackingOffset)(d3Dataset);\n    ids.forEach((id, index) => {\n      const dataKey = series[id].dataKey;\n      completedSeries[id] = (0, _extends2.default)({\n        labelMarkType: 'line'\n      }, series[id], {\n        data: dataKey ? dataset.map(data => {\n          const value = data[dataKey];\n          if (typeof value !== 'number') {\n            if (process.env.NODE_ENV !== 'production') {\n              if (value !== null) {\n                (0, _warning.warnOnce)([`MUI X Charts: Your dataset key \"${dataKey}\" is used for plotting line, but contains nonnumerical elements.`, 'Line plots only support numbers and null values.']);\n              }\n            }\n            return null;\n          }\n          return value;\n        }) : series[id].data,\n        stackedData: stackedSeries[index].map(([a, b]) => [a, b])\n      });\n    });\n  });\n  return {\n    seriesOrder,\n    stackingGroups,\n    series: (0, _defaultizeValueFormatter.defaultizeValueFormatter)(completedSeries, v => v == null ? '' : v.toLocaleString())\n  };\n};\nvar _default = exports.default = seriesProcessor;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}